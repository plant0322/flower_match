<!DOCTYPE html>
<html>
  <head>
    <title>FlowerMatching</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  </head>

  <body class="d-flex flex-column vh-100">
    <!--ヘッダーここから-->
    <header class="d-flex flex-row bg-secondary p-2">
      <div class="col-4 pt-4 ps-4">
        <%= link_to root_path do %>
          <p class="h1 text-white">FlowerMatch</p>
        <% end %>
      </div>
        <!--ログイン中の一般ユーザー名-->
        <% if shop_signed_in? %>
          <div class="text-white"><%= current_shop.name %></div>
        <% end %>
        <!--ログイン中のショップ名-->
        <% if member_signed_in? %>
          <div class="text-white"><%= current_member.last_name %></div>
        <% end %>
        <!--管理者でログインしている場合-->
        <% if admin_signed_in? %>
          <div class="text-white">管理者</div>
        <% end %>
      <!--検索フォーム-->
      <div class="input-group h-25">
        <input type="text" class="form-control" placeholder="キーワードから探す" aria-label="キーワードから探す">
        <div class="input-group-append">
          <button class="btn btn-info" type="button">検索</button>
        </div>
      </div>
      <!--ヘッダーボタン-->
      <div class="col-5 d-flex justify-content-end pe-4">
        <%= link_to destroy_member_session_path, method: :delete, "data-confirm" => "本当に削除しますか？", class: "text-white" do %>ユーザーログアウト　<% end %>
        <%= link_to shop_session_path, method: :delete, class: "text-white" do %>店ログイン　<% end %>
        <%= link_to destroy_shop_session_path, method: :delete, "data-confirm" => "本当に削除しますか？", class: "text-white" do %>店ログアウト<% end %>
        <!--ショップユーザーログイン後-->
        <% if shop_signed_in? %>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to new_shop_item_path do %>商品の新規登録<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to shop_top_path do %>ショップマイページ<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to shop_pre_orders_path do %>予約一覧<% end %></div>
        <% elsif member_signed_in? %>
        <!--一般ユーザーログイン後-->
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to about_path do %>About<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to mypage_path do %>ユーザーマイページ<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to pre_orders_path do %>予約一覧<% end %></div>
        <% elsif admin_signed_in? %>
        <!--管理者ログイン後…口コミ一覧・連絡一覧を追加する-->
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to admin_shops_path do %>ショップ一覧<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to admin_members_path do %>一般ユーザー一覧<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to destroy_admin_session_path do %>ログアウト<% end %></div>
        <% else %>
          <!--ログイン前-->
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to about_path do %>About<% end %></div>
          <div class="col-1 bg-info p-3 m-2 w-25"><%= link_to new_member_session_path do %>ログイン<% end %></div>
        <% end %>
      </div>
    </header>

    <main class="mb-auto">
      <% flash.each do |message_type, message| %>
        <div class="flash-message <%= message_type %>"><%= message %></div>
      <% end %>

      <%= yield %>
    </main>

    <footer class="bg-secondary text-center p-3">
      <small>
        Copyright © flowerMatch All Rights Reserved.<br>
        このサイト内の文章、画像などの無断複製、無断転載を禁止します。
      </small>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  </body>
</html>
