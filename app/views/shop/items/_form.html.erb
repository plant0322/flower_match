<%= form_with model: item, url: url do |f| %>
  <%= render "layouts/error_messages", obj: item %>

  <div class="pb-4">
    <h3 class="bg-info p-1 h5">商品情報</h3>
    <table class="table table-borderless table-light my-3">
      <tr>
        <th class="w-25"><%= f.label :item_image, "画像" %></th>
        <td>
          <% unless controller.action_name == 'edit' %>
            <%= image_tag asset_path('sample.jpg'), size: '150x150' %>
          <% else %>
            <%= image_tag item.get_item_image(100,100),class: "w-100" %>
          <% end %>
        </td>
        <td><%= f.file_field :item_image, accept: "image/*", class: "form-control" %></td>
      </tr>
      <tr>
        <th><%= f.label :name, "商品名" %></th>
        <td colspan="2"><%= f.text_field :name, autocomplete: "name", class: "form-control" %></td>
      </tr>
      <tr>
        <th><%= f.label :introduction, "商品説明" %></th>
        <td colspan="2"><%= f.text_area :introduction, autocomplete: "introduction", class: "form-control" %></td>
      </tr>
      <tr>
        <th><%= f.label :tag_name, "タグ" %></th>
        <td colspan="2">
          <%= f.text_field :tag_name, placeholder: "半角スペースを入れて複数のタグを追加できます", autocomplete: "tag_name", class: "form-control" %>
          <small>
            登録中のタグ:
            <% @item.tags.each do |tag| %>
              <%= tag.name %>
            <% end %>
          </small>
        </td>
      </tr>
    </table>
  </div>

  <div class="pb-4">
    <h3 class="bg-info p-1 h5">商品詳細</h3>
    <table class="table table-borderless table-light my-3">
      <tr>
        <th class="w-25"><%= f.label :size, "サイズ" %></th>
        <td colspan="2">
          <%= f.text_field :size, autocomplete: "size", class: "form-control" %>
          <small>例）幅15×奥行き15×高さ20㎝</small>
        </td>
      </tr>
      <tr>
        <th><%= f.label :price, "値段" %></th>
        <td>
          <%= f.text_field :price, autocomplete: "price", class: "form-control" %>
          <small>例）5000　※入力された金額がそのまま商品ページへ反映されます。税込の販売価格を数字のみで入力してください</small>
        </td>
        <td>円</td>
      </tr>
      <tr>
        <th><%= f.label :stock, "在庫" %></th>
        <td>
          <%= f.text_field :stock, autocomplete: "stock", class: "form-control" %>
          <small>※対応可能な個数を入力してください</small>
        </td>
        <td>個</td>
      </tr>
    </table>
  </div>

  <div class="pb-4">
    <h3 class="bg-info p-1 h5">商品設定</h3>
    <table class="table table-borderless table-light my-3">
      <tr>
        <th class="w-25"><%= f.label :deadline, "キャンセル可能期限" %></th>
        <td colspan="2">
          <%= f.text_field :deadline, autocomplete: "deadline", class: "form-control" %>
          <small>例）3　※数字で入力してください</small>
          <td>日前まで可能</td>
        </td>
      </tr>
      <tr>
        <th><%= f.label :is_active, "公開 / 非公開" %></th>
        <td colspan="3">
          <%= f.radio_button :is_active, true, class: "form-check-input" %><%= f.label :is_active, '公開', class: "form-check-label text-success" %>
          <%= f.radio_button :is_active, false, class: "form-check-input" %><%= f.label :is_active, '非公開', class: "form-check-label text-danger" %>
        </td>
      </tr>
    </table>
  </div>

  <div class="d-flex flex-row my-3 mx-auto">
    <div class="col-4 d-grid p-2">
      <%= link_to "マイページへ戻る", shop_top_path, class: "btn btn-outline-info p-2" %>
    </div>
    <div class="col-8 d-flex flex-row p-2">
      <% unless controller.action_name == 'edit' %>
        <%= f.submit "商品を登録する", class: "btn btn-info p-2" %>
      <% else %>
        <div class="col-6 d-grid px-1">
          <%= link_to "プレビューで確認する", item_path(item), target: :_blank, class: "btn btn-outline-info p-2" %>
        </div>
        <div class="col-6 d-grid px-1">
          <%= f.submit "商品を編集する", class: "btn btn-info p-2" %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
